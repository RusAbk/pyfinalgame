(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{442:function(e,t,r){"use strict";r.r(t);r(57),r(30),r(59),r(25);var n={data:function(){return{name:"",error:{visibility:!1,text:""}}},methods:{wsDataReceived:function(data){"response"==(data=JSON.parse(data)).type?this.responseReceived(data):this.requestReceived(data)},responseReceived:function(data){var e=this;console.log("response",data),"setNameError"==data.params.event&&this.showError("Не получается назначить имя. Похоже вы не подключены к игре"),"joinError"==data.params.event&&(this.showError("Ваш ключ недействителен. Сейчас вы будете переведены на страницу входа"),setTimeout((function(){e.$nuxt.$router.replace({path:"/"})}),3e3)),"setNameSuccess"==data.params.event&&(this.$store.commit("setName",data.params.name),this.$store.commit("setRole",data.params.role),this.$nuxt.$router.replace({path:"/game"}))},requestReceived:function(data){console.log("request",data)},showError:function(text){var e=this;this.error.visibility=!0,this.error.text=text,setTimeout((function(){e.error.visibility=!1}),3e3)},setName:function(){""!=this.name?this.$ws.send(JSON.stringify({type:"request",params:{type:"setName",name:this.name}})):this.showError("Имя не должно остаться пустым")},joinGame:function(){this.$ws.send(JSON.stringify({type:"request",params:{type:"joinGame",key:this.$store.state.key}}))}},mounted:function(){var e=this;this.$ws.onmessage=function(t){e.wsDataReceived(t.data)},null!=this.$store.state.key&&setTimeout(this.joinGame,1e3)}},o=r(75),c=r(98),l=r.n(c),m=r(447),v=r(320),h=r(344),d=r(333),f=r(435),component=Object(o.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"mt-10"},[r("v-alert",{attrs:{type:"error",value:e.error.visibility,transition:"scale-transition"}},[e._v("\n    "+e._s(e.error.text)+"\n  ")]),e._v(" "),r("v-card",{staticClass:"mt-6 pa-6",attrs:{elevation:"2"}},[r("v-card-title",[e._v(" Представься, прежде, чем войти ")]),e._v(" "),r("v-card-subtitle",[e._v("\n      Для того, чтобы подключиться к игре, введи свои настоящие имя и фамилию\n    ")]),e._v(" "),r("v-card-text",[r("v-text-field",{attrs:{label:"Введите имя и фамилию","prepend-inner-icon":"mdi-account-outline"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),r("v-btn",{staticClass:"white--text",attrs:{color:"light-blue darken-4"},on:{click:e.setName}},[e._v("\n        Войти\n      ")])],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;l()(component,{VAlert:m.a,VBtn:v.a,VCard:h.a,VCardSubtitle:d.b,VCardText:d.c,VCardTitle:d.d,VTextField:f.a})}}]);