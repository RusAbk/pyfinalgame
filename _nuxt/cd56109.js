(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{443:function(e,t,n){"use strict";n.r(t);n(57),n(30),n(59);var r={data:function(){return{mode:"connect",newGame:{title:""},createdGame:{status:void 0,title:"",adminCode:"",playerCode:""},gameKey:"",error:{visibility:!1,text:""}}},methods:{wsDataReceived:function(data){"response"==(data=JSON.parse(data)).type?this.responseReceived(data):this.requestReceived(data)},responseReceived:function(data){var e=this;console.log("response",data),"gameCreated"==data.params.event&&(this.createdGame.status="ok",this.createdGame.title=data.params.game.title,this.createdGame.adminCode=data.params.game.adminCode,this.createdGame.playerCode=data.params.game.playerCode,this.mode="connect"),"joinError"==data.params.event&&(this.error.visibility=!0,this.error.text="Неверный ключ для подключения :(",setTimeout((function(){e.error.visibility=!1}),3e3)),"joinSuccess"==data.params.event&&(this.$store.commit("setKey",data.params.key),this.$store.commit("setRole",data.params.role),this.$nuxt.$router.replace({path:"/pregame"}))},requestReceived:function(data){console.log("request",data)},createGame:function(){this.$ws.send(JSON.stringify({type:"request",params:{type:"createGame",title:this.newGame.title}}))},joinGame:function(){this.$ws.send(JSON.stringify({type:"request",params:{type:"joinGame",key:this.gameKey}}))}},mounted:function(){var e=this;this.$ws.onmessage=function(t){e.wsDataReceived(t.data)}}},o=n(75),c=n(98),l=n.n(c),d=n(447),v=n(320),m=n(344),_=n(333),h=n(435),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mt-10"},[n("v-alert",{attrs:{type:"error",value:e.error.visibility,transition:"scale-transition"}},[e._v("\n    "+e._s(e.error.text)+"\n  ")]),e._v(" "),"ok"!=e.createdGame.status?n("div",[n("v-btn",{attrs:{color:"light-blue darken-4",plain:"",outlined:"create"!=e.mode},on:{click:function(t){e.mode="connect"}}},[e._v("\n      Подключиться к игре\n    ")]),e._v(" "),n("v-btn",{attrs:{color:"light-blue darken-4",plain:"",outlined:"create"==e.mode},on:{click:function(t){e.mode="create"}}},[e._v("\n      Создать новую игру\n    ")])],1):e._e(),e._v(" "),n("v-card",{staticClass:"mt-6 pa-6",attrs:{elevation:"2"}},[n("v-card-title",[e._v("\n      "+e._s("connect"==e.mode?"Подключиться к игре":"Создать игру")+"\n    ")]),e._v(" "),"connect"==e.mode?n("div",[n("v-card-subtitle",[e._v("\n        Для того, чтобы подключиться к игре, сначала спроси у преподавателя\n        код и введи его в поле ниже\n      ")]),e._v(" "),n("v-card-text",[n("v-text-field",{attrs:{label:"Введите код игры","prepend-inner-icon":"mdi-key-outline"},model:{value:e.gameKey,callback:function(t){e.gameKey=t},expression:"gameKey"}}),e._v(" "),n("v-btn",{staticClass:"white--text",attrs:{color:"light-blue darken-4"},on:{click:e.joinGame}},[e._v("\n          Подключиться\n        ")])],1)],1):n("div",[n("v-card-subtitle",[e._v("Чтобы создать игру, введите название. Оно ни на что не влияет, в\n        качестве названия можно использовать номер группы")]),e._v(" "),n("v-card-text",[n("v-text-field",{attrs:{label:"Введите название","prepend-inner-icon":"mdi-tag-outline"},model:{value:e.newGame.title,callback:function(t){e.$set(e.newGame,"title",t)},expression:"newGame.title"}}),e._v(" "),n("v-btn",{staticClass:"white--text",attrs:{color:"light-blue darken-4"},on:{click:e.createGame}},[e._v("\n          Создать\n        ")])],1)],1)],1),e._v(" "),"ok"==e.createdGame.status?n("v-card",{staticClass:"mt-12",attrs:{transition:"scale-transition"}},[n("v-card-title",[e._v("Игра создана")]),e._v(" "),n("v-card-subtitle",[e._v("Используйте код админа, чтобы войти в игру. Кодом для игроков\n      поделитесь с остальными участниками!")]),e._v(" "),n("v-card-text",{staticClass:"text-center"},[n("p",{staticClass:"text-h6"},[e._v("\n        Название:\n        "),n("strong",{staticClass:"green--text text--accent-3"},[e._v(e._s(e.createdGame.title))]),e._v(" "),n("br"),e._v("\n        Код для подключения админа:\n        "),n("kbd",[n("strong",[e._v(e._s(e.createdGame.adminCode))])]),e._v(" "),n("br"),e._v("\n        Код для подключения игрока:\n        "),n("kbd",[n("strong",[e._v(e._s(e.createdGame.playerCode))])])])])],1):e._e()],1)}),[],!1,null,null,null);t.default=component.exports;l()(component,{VAlert:d.a,VBtn:v.a,VCard:m.a,VCardSubtitle:_.b,VCardText:_.c,VCardTitle:_.d,VTextField:h.a})}}]);